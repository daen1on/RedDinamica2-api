import{a as L}from"./chunk-YM3PCZES.js";import{a as E}from"./chunk-ZTCIQEDA.js";import{B as v}from"./chunk-GWDAXWU7.js";import{Da as c,Hb as P,Ib as O,Jb as b,Na as t,Oa as n,Pa as d,Rb as x,Va as h,bc as y,cc as S,eb as a,ec as k,fb as g,gb as _,hb as f,ob as M,pa as i,sa as u,ta as C,ya as p}from"./chunk-3BHHYQXT.js";var w=r=>["/academia/groups",r];function G(r,l){r&1&&(t(0,"div",7)(1,"div",8)(2,"span",9),a(3,"Cargando..."),n()(),t(4,"p",10),a(5,"Cargando datos del dashboard..."),n()())}function T(r,l){if(r&1&&(t(0,"div",11),d(1,"i",12),a(2),n()),r&2){let e=h();i(2),_(" ",e.errorMessage," ")}}function D(r,l){r&1&&(t(0,"div",30),d(1,"i",31),t(2,"h4"),a(3,"No tienes grupos acad\xE9micos"),n(),t(4,"p"),a(5,"Crea tu primer grupo para comenzar a trabajar con estudiantes"),n(),t(6,"button",24),d(7,"i",25),a(8," Crear Primer Grupo "),n()())}function A(r,l){if(r&1&&(t(0,"div",34)(1,"div",35)(2,"h4"),a(3),n(),t(4,"span",36),a(5),n()(),t(6,"p",37),a(7),n(),t(8,"div",38)(9,"div",39),d(10,"i",40),t(11,"span"),a(12),n()(),t(13,"div",39),d(14,"i",20),t(15,"span"),a(16),n()(),t(17,"div",39),d(18,"i",17),t(19,"span"),a(20),n()()(),t(21,"div",41)(22,"div",42)(23,"small"),a(24,"Lecciones"),n(),t(25,"strong"),a(26),n()(),t(27,"div",42)(28,"small"),a(29,"Activas"),n(),t(30,"strong"),a(31),n()(),t(32,"div",42)(33,"small"),a(34,"Completadas"),n(),t(35,"strong"),a(36),n()()()()),r&2){let e=l.$implicit,o=h(3);c("routerLink",M(12,w,e._id)),i(3),g(e.name),i(),c("ngClass",e.isActive?"bg-success":"bg-secondary"),i(),_(" ",e.isActive?"Activo":"Inactivo"," "),i(2),g(e.description),i(5),f("",e.academicLevel," - ",e.grade,""),i(4),g(e.subjects?e.subjects.join(", "):"Sin asignaturas"),i(4),_("",e.students.length," estudiantes"),i(6),g(o.getGroupLessonsCount(e)),i(5),g(o.getGroupActiveLessonsCount(e)),i(5),g(o.getGroupCompletedLessonsCount(e))}}function z(r,l){if(r&1&&(t(0,"div",32),p(1,A,37,14,"div",33),n()),r&2){let e=h(2);i(),c("ngForOf",e.groups)}}function j(r,l){r&1&&(t(0,"div",30),d(1,"i",43),t(2,"h4"),a(3,"No hay lecciones recientes"),n(),t(4,"p"),a(5,"Las lecciones creadas por tus estudiantes aparecer\xE1n aqu\xED"),n()())}function F(r,l){r&1&&d(0,"div",44)}function B(r,l){if(r&1&&(t(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),d(4,"i",17),n(),t(5,"div",18)(6,"h3"),a(7),n(),t(8,"p"),a(9,"Total Estudiantes"),n()()(),t(10,"div",15)(11,"div",16),d(12,"i",19),n(),t(13,"div",18)(14,"h3"),a(15),n(),t(16,"p"),a(17,"Total Grupos"),n()()(),t(18,"div",15)(19,"div",16),d(20,"i",20),n(),t(21,"div",18)(22,"h3"),a(23),n(),t(24,"p"),a(25,"Total Lecciones"),n()()(),t(26,"div",15)(27,"div",16),d(28,"i",21),n(),t(29,"div",18)(30,"h3"),a(31),n(),t(32,"p"),a(33,"Promedio por Grupo"),n()()()(),t(34,"div",22)(35,"div",23)(36,"h3"),d(37,"i",19),a(38," Mis Grupos Acad\xE9micos"),n(),t(39,"button",24),d(40,"i",25),a(41," Crear Nuevo Grupo "),n()(),p(42,D,9,0,"div",26)(43,z,2,1,"div",27),n(),t(44,"div",22)(45,"div",23)(46,"h3"),d(47,"i",20),a(48," Lecciones Recientes"),n(),t(49,"button",28),a(50," Ver Todas "),n()(),p(51,j,6,0,"div",26)(52,F,1,0,"div",29),n()()),r&2){let e=h();i(7),g(e.totalStudents),i(8),g(e.totalGroups),i(8),g(e.totalLessons),i(8),g(e.groups.length>0?(e.totalLessons/e.groups.length).toFixed(1):0),i(11),c("ngIf",e.groups.length===0),i(),c("ngIf",e.groups.length>0),i(8),c("ngIf",e.recentLessons.length===0),i(),c("ngIf",e.recentLessons.length>0)}}var K=(()=>{class r{constructor(e,o,s){this.academicGroupService=e,this.academicLessonService=o,this.router=s,this.groups=[],this.lessons=[],this.recentLessons=[],this.loading=!1,this.errorMessage="",this.totalGroups=0,this.totalStudents=0,this.totalLessons=0,this.lessonsByStatus={},this.averageGrade=0,this.totalGradedLessons=0}ngOnInit(){if(!this.canAccessTeacherPanel()){this.router.navigate(["/academia"]);return}this.loadDashboardData()}canAccessTeacherPanel(){let e=localStorage.getItem("user")||localStorage.getItem("identity")||"{}",o=JSON.parse(e),s=Array.isArray(o.roles)?o.roles.map(I=>String(I).toLowerCase()):[],m=(o.role||o.rol||o.userRole||"").toString().toLowerCase();return m==="teacher"||m==="admin"||m==="expert"||m==="lesson_manager"||s.includes("teacher")||s.includes("admin")||s.includes("expert")}loadDashboardData(){this.loading=!0,this.academicGroupService.getTeacherGroups().subscribe({next:e=>{e.status==="success"&&(this.groups=e.data,this.totalGroups=this.groups.length,this.totalStudents=this.groups.reduce((o,s)=>o+s.students.length,0))},error:e=>{console.error("Error loading groups:",e),this.errorMessage="Error al cargar los grupos"}}),this.academicLessonService.getTeacherLessons().subscribe({next:e=>{e.status==="success"&&(this.lessons=e.data,this.totalLessons=this.lessons.length,this.recentLessons=this.lessons.slice(0,5),this.calculateStatistics())},error:e=>{console.error("Error loading lessons:",e),this.errorMessage="Error al cargar las lecciones"},complete:()=>{this.loading=!1}})}calculateStatistics(){this.lessonsByStatus={},this.lessons.forEach(o=>{let s=o.status;this.lessonsByStatus[s]=(this.lessonsByStatus[s]||0)+1});let e=this.lessons.filter(o=>o.grade&&o.grade>0);if(this.totalGradedLessons=e.length,this.totalGradedLessons>0){let o=e.reduce((s,m)=>s+(m.grade||0),0);this.averageGrade=Math.round(o/this.totalGradedLessons*100)/100}else this.averageGrade=0}getStatusLabel(e){return{draft:"Borrador",proposed:"Propuesta",approved:"Aprobada",rejected:"Rechazada",completed:"Completada",graded:"Calificada"}[e]||e}getStatusBadgeClass(e){return{draft:"badge-secondary",proposed:"badge-warning",approved:"badge-success",rejected:"badge-danger",completed:"badge-info",graded:"badge-primary"}[e]||"badge-secondary"}getDifficultyLabel(e){return{F\u00E1cil:"F\xE1cil",Moderado:"Moderado",Dif\u00EDcil:"Dif\xEDcil"}[e]||e}getDifficultyBadgeClass(e){return{F\u00E1cil:"badge-success",Moderado:"badge-warning",Dif\u00EDcil:"badge-danger"}[e]||"badge-secondary"}getDurationLabel(e){if(e<60)return`${e} min`;{let o=Math.floor(e/60),s=e%60;return s===0?`${o}h`:`${o}h ${s}min`}}viewGroup(e){this.router.navigate(["/academia/groups",e._id])}viewLesson(e){this.router.navigate(["/academia/lessons",e._id])}createGroup(){this.router.navigate(["/academia/groups/create"])}goToGroups(){this.router.navigate(["/academia/groups"])}goToLessons(){this.router.navigate(["/academia/lessons"])}getTotalStudents(){return this.totalStudents}getActiveGroups(){return this.groups.filter(e=>e.isActive).length}getTotalLessons(){return this.totalLessons}getGroupLessonsCount(e){return e.lessons?e.lessons.length:0}getGroupActiveLessonsCount(e){return 0}getGroupCompletedLessonsCount(e){return 0}static{this.\u0275fac=function(o){return new(o||r)(u(L),u(E),u(y))}}static{this.\u0275cmp=C({type:r,selectors:[["app-teacher-dashboard"]],decls:10,vars:3,consts:[[1,"teacher-dashboard"],[1,"dashboard-header"],[1,"fas","fa-chalkboard-teacher"],[1,"text-muted"],["class","loading-container",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle"],[1,"dashboard-content"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-users"],[1,"stat-content"],[1,"fas","fa-layer-group"],[1,"fas","fa-book"],[1,"fas","fa-chart-line"],[1,"section"],[1,"section-header"],["routerLink","/academia/groups/create",1,"btn","btn-primary"],[1,"fas","fa-plus"],["class","empty-state",4,"ngIf"],["class","groups-grid",4,"ngIf"],["routerLink","/academia/lessons",1,"btn","btn-outline-primary"],["class","lessons-list",4,"ngIf"],[1,"empty-state"],[1,"fas","fa-users","fa-3x","text-muted"],[1,"groups-grid"],["class","group-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"group-card",3,"routerLink"],[1,"group-header"],[1,"badge",3,"ngClass"],[1,"group-description"],[1,"group-details"],[1,"detail-item"],[1,"fas","fa-graduation-cap"],[1,"group-stats"],[1,"stat"],[1,"fas","fa-book","fa-3x","text-muted"],[1,"lessons-list"]],template:function(o,s){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),d(3,"i",2),a(4," Panel de Docente"),n(),t(5,"p",3),a(6,"Gestiona tus grupos acad\xE9micos y lecciones"),n()(),p(7,G,6,0,"div",4)(8,T,3,1,"div",5)(9,B,53,8,"div",6),n()),o&2&&(i(7),c("ngIf",s.loading),i(),c("ngIf",s.errorMessage),i(),c("ngIf",!s.loading&&!s.errorMessage))},dependencies:[x,P,O,b,v,k,S],styles:['.teacher-dashboard[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;color:#333;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.dashboard-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;color:#fff}.dashboard-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;margin:0}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#fff}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border-radius:15px;border:none;box-shadow:0 4px 15px #0000001a}.dashboard-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:3rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;text-align:center;box-shadow:0 8px 25px #0000001a;transition:all .3s ease;border:1px solid rgba(255,255,255,.2);position:relative;overflow:hidden}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2)}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #00000026}.stat-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 1rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#667eea;margin:0 0 .5rem}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin:0;font-weight:500}.section[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;margin-bottom:2rem;box-shadow:0 8px 25px #0000001a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #f0f0f0}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;margin:0}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;margin-right:.5rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:25px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #667eea66}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#666}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ddd;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:.5rem;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;line-height:1.6}.groups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.group-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:15px;padding:1.5rem;border:1px solid #e9ecef;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden}.group-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#667eea,#764ba2)}.group-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #0000001a;border-color:#667eea}.group-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.group-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#333;margin:0}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;font-size:.8rem;font-weight:600}.bg-success[_ngcontent-%COMP%]{background:#28a745!important}.bg-secondary[_ngcontent-%COMP%]{background:#6c757d!important}.group-description[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem;line-height:1.5}.group-details[_ngcontent-%COMP%]{margin-bottom:1.5rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.75rem;color:#555}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;margin-right:.75rem;width:20px}.group-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;text-align:center;padding-top:1rem;border-top:1px solid #e9ecef}.stat[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#666;font-size:.8rem;margin-bottom:.25rem}.stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#333;font-size:1.1rem;font-weight:600}@media (max-width: 768px){.teacher-dashboard[_ngcontent-%COMP%]{padding:1rem}.dashboard-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.stats-grid[_ngcontent-%COMP%], .groups-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.section-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stat-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.stat-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.theme-dark[_nghost-%COMP%]   .teacher-dashboard[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .teacher-dashboard[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0b1020,#0c121a);color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .dashboard-header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dashboard-header[_ngcontent-%COMP%]{color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .loading-container[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .loading-container[_ngcontent-%COMP%]{color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .stat-card[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#1a1f24f2;border-color:#2a2f36;color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--rd-primary)}.theme-dark[_nghost-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--rd-muted)}.theme-dark[_nghost-%COMP%]   .section[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .section[_ngcontent-%COMP%]{background:#1a1f24f2;border-color:#2a2f36;color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .section-header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom-color:#2a2f36}.theme-dark[_nghost-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]{color:var(--rd-muted)}.theme-dark[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .groups-grid[_ngcontent-%COMP%]   .group-card[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .groups-grid[_ngcontent-%COMP%]   .group-card[_ngcontent-%COMP%]{background:#0f1420;border-color:#2a2f36;color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .group-stats[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .group-stats[_ngcontent-%COMP%]{border-top-color:#2a2f36}.theme-dark[_nghost-%COMP%]   .detail-item[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .detail-item[_ngcontent-%COMP%]{color:var(--rd-muted)}.theme-dark[_nghost-%COMP%]   .stat[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .stat[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--rd-muted)}.theme-dark[_nghost-%COMP%]   .stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--rd-text)}.theme-dark[_nghost-%COMP%]   .badge.bg-secondary[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .badge.bg-secondary[_ngcontent-%COMP%]{background:#374151!important}']})}}return r})();export{K as a};
