import{a as B}from"./chunk-TSWB7RUP.js";import{a as L}from"./chunk-H2O7B6BZ.js";import"./chunk-M6MDGVAZ.js";import{A as k,C as T,c as S,d as v,e as R,f as E,m as I,q as M,r as N}from"./chunk-GWDAXWU7.js";import{$b as j,Da as s,Hb as x,Jb as y,Na as t,Oa as i,Pa as u,Rb as F,Ua as b,Va as w,X as p,bc as D,cc as q,eb as a,ec as _,nb as g,ob as h,pa as n,sa as l,ta as C,ua as f,ya as c}from"./chunk-3BHHYQXT.js";var G=e=>({"is-invalid":e}),H=()=>["/login"],O=()=>["/register"];function z(e,m){e&1&&(t(0,"div",20),u(1,"i",21),a(2," Hubo un error al restablecer tu contrase\xF1a. Por favor, int\xE9ntalo de nuevo. "),i())}function J(e,m){e&1&&(t(0,"div",22),u(1,"i",23),a(2," Tu contrase\xF1a ha sido restablecida exitosamente. Ser\xE1s redirigido a la p\xE1gina de inicio de sesi\xF3n en breve. "),i())}function K(e,m){e&1&&(t(0,"div"),a(1,"La nueva contrase\xF1a es obligatoria."),i())}function Q(e,m){e&1&&(t(0,"div"),a(1,"La nueva contrase\xF1a debe tener al menos 6 caracteres."),i())}function W(e,m){if(e&1&&(t(0,"div",24),c(1,K,2,0,"div",25)(2,Q,2,0,"div",25),i()),e&2){let r=w();n(),s("ngIf",r.f.newPassword.errors.required),n(),s("ngIf",r.f.newPassword.errors.minlength)}}function X(e,m){e&1&&(t(0,"div"),a(1,"Confirmar la nueva contrase\xF1a es obligatorio."),i())}function Y(e,m){e&1&&(t(0,"div"),a(1,"Las contrase\xF1as no coinciden."),i())}function Z(e,m){if(e&1&&(t(0,"div",24),c(1,X,2,0,"div",25)(2,Y,2,0,"div",25),i()),e&2){let r=w();n(),s("ngIf",r.f.confirmPassword.errors.required),n(),s("ngIf",r.f.confirmPassword.errors.mustMatch)}}var A=(()=>{class e{constructor(r,d,o,P){this._formBuilder=r,this._userService=d,this.route=o,this.router=P,this.submitted=!1}ngOnInit(){this.token=this.route.snapshot.paramMap.get("token"),this.resetPasswordForm=this._formBuilder.group({newPassword:["",[v.required,v.minLength(6)]],confirmPassword:["",v.required]},{validators:B("newPassword","confirmPassword")})}get f(){return this.resetPasswordForm.controls}onSubmit(){this.submitted=!0,!this.resetPasswordForm.invalid&&this._userService.resetPassword(this.token,this.resetPasswordForm.value.newPassword).subscribe({next:r=>{this.status="success",this.router.navigate(["/login"])},error:r=>{this.status="error",console.log(r)}})}static{this.\u0275fac=function(d){return new(d||e)(l(k),l(L),l(j),l(D))}}static{this.\u0275cmp=C({type:e,selectors:[["reset-password"]],standalone:!1,decls:27,vars:15,consts:[["id","resetPassword",1,"bg-white"],[1,"container","px-0","py-5","bg-light"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card"],[1,"card-body","text-center"],[1,"card-title"],[1,"px-4","py-3"],["class","alert alert-danger fade show text-center","role","alert",4,"ngIf"],["class","alert alert-success fade show text-center","role","alert",4,"ngIf"],[1,"px-4","py-3","text-start",3,"ngSubmit","formGroup"],[1,"mb-3"],["type","password","id","newPassword","placeholder","Nueva Contrase\xF1a","formControlName","newPassword",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","id","confirmPassword","placeholder","Confirmar Nueva Contrase\xF1a","formControlName","confirmPassword",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-success","w-100","btn-lg","mb-2"],[1,"card-link",3,"routerLink"],[1,"card-footer","text-center"],[1,"card-text"],[1,"dropdown-item","py-2",3,"routerLink"],["role","alert",1,"alert","alert-danger","fade","show","text-center"],[1,"fas","fa-times-circle","icon-message","me-2"],["role","alert",1,"alert","alert-success","fade","show","text-center"],[1,"fas","fa-check-circle","icon-message","me-2"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(d,o){d&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),a(7,"Restablecer Contrase\xF1a"),i(),t(8,"section",7),c(9,z,3,0,"div",8)(10,J,3,0,"div",9),i(),t(11,"form",10),b("ngSubmit",function(){return o.onSubmit()}),t(12,"div",11),u(13,"input",12),c(14,W,3,2,"div",13),i(),t(15,"div",11),u(16,"input",14),c(17,Z,3,2,"div",13),i(),t(18,"button",15),a(19,"Restablecer Contrase\xF1a"),i(),t(20,"a",16),a(21,"\u2190 Volver a inicio de sesi\xF3n"),i()()(),t(22,"div",17)(23,"p",18),a(24,"\xBFNo tienes una cuenta en RedDin\xE1mica?"),i(),t(25,"a",19),a(26,"Registrarse"),i()()()()()()()),d&2&&(n(9),s("ngIf",o.status==="error"),n(),s("ngIf",o.status==="success"),n(),s("formGroup",o.resetPasswordForm),n(2),s("ngClass",h(9,G,o.submitted&&o.f.newPassword.errors)),n(),s("ngIf",o.submitted&&o.f.newPassword.errors),n(2),s("ngClass",h(11,G,o.submitted&&o.f.confirmPassword.errors)),n(),s("ngIf",o.submitted&&o.f.confirmPassword.errors),n(3),s("routerLink",g(13,H)),n(5),s("routerLink",g(14,O)))},dependencies:[x,y,I,S,R,E,M,N,q],encapsulation:2})}}return e})();var $=[{path:"",component:A}],U=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=p({imports:[_.forChild($),_]})}}return e})();var ve=(()=>{class e{static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=p({imports:[F,T,U]})}}return e})();export{ve as ResetPasswordModule};
