import{a as _e,b as he}from"./chunk-27IZBTZL.js";import{a as be}from"./chunk-WESTYKRX.js";import{c as se,d as ae}from"./chunk-DEF5ACRI.js";import{a as fe}from"./chunk-5JTGT5DU.js";import{a as pe}from"./chunk-GAG5MJMH.js";import{a as ve}from"./chunk-TSWB7RUP.js";import{a as ge}from"./chunk-5P7CLSZR.js";import{a as me}from"./chunk-H2O7B6BZ.js";import{a as le}from"./chunk-M6MDGVAZ.js";import{C as oe,b as Q,c as H,d as c,e as K,f as Y,m as W,q as X,r as Z,s as ee,t as te,u as ie,x as ne,z as re}from"./chunk-GWDAXWU7.js";import{$b as de,Da as a,H as E,Hb as G,Jb as J,Na as i,Oa as t,Pa as h,R as F,Rb as $,S as v,Ta as j,Ua as y,Va as u,X as S,ab as L,ba as A,bb as V,bc as ue,ca as q,cb as O,cc as ce,db as U,eb as o,ec as T,fb as R,g as N,gb as B,j as k,na as D,nb as w,ob as f,pa as s,ra as P,sa as _,ta as M,u as x,ua as I,vb as z,w as C,ya as d}from"./chunk-3BHHYQXT.js";var Fe=["contador"],g=e=>({"is-invalid":e}),xe=()=>["/login"];function Re(e,m){if(e&1&&(i(0,"div",62),o(1),i(2,"a",63),o(3," Inicia sesi\xF3n "),t()()),e&2){let n=u();s(),B(" ",n.message," "),s(),a("routerLink",w(2,xe))}}function we(e,m){e&1&&(i(0,"div"),o(1," El campo nombres es obligatorio. "),t())}function Te(e,m){if(e&1&&(i(0,"div",64),d(1,we,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.name.errors.required)}}function Ne(e,m){e&1&&(i(0,"div"),o(1," El campo apellidos es obligatorio. "),t())}function ke(e,m){if(e&1&&(i(0,"div",64),d(1,Ne,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.surname.errors.required)}}function Ae(e,m){e&1&&(i(0,"div"),o(1,"El campo correo electr\xF3nico es obligatorio. "),t())}function qe(e,m){e&1&&(i(0,"div"),o(1,"El correo electr\xF3nico debe ser una direcci\xF3n email v\xE1lida. "),t())}function De(e,m){if(e&1&&(i(0,"div",64),d(1,Ae,2,0,"div",27)(2,qe,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.email.errors.required),s(),a("ngIf",n.f.email.errors.email)}}function Pe(e,m){e&1&&(i(0,"div"),o(1," El campo contrase\xF1a es obligatorio. "),t())}function Me(e,m){e&1&&(i(0,"div"),o(1," La contrase\xF1a debe tener m\xEDnimo seis caracteres. "),t())}function je(e,m){if(e&1&&(i(0,"div",64),d(1,Pe,2,0,"div",27)(2,Me,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.password.errors.required),s(),a("ngIf",n.f.password.errors.minlength)}}function Le(e,m){e&1&&(i(0,"div"),o(1," El campo contrase\xF1a es obligatorio. "),t())}function Ve(e,m){e&1&&(i(0,"div"),o(1," Las contrase\xF1as no coinciden. "),t())}function Oe(e,m){if(e&1&&(i(0,"div",64),d(1,Le,2,0,"div",27)(2,Ve,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.confirmPassword.errors.required),s(),a("ngIf",n.f.confirmPassword.errors.mustMatch)}}function Ue(e,m){e&1&&(i(0,"div",66),o(1," El campo profesi\xF3n es obligatorio. "),t())}function Be(e,m){if(e&1&&(i(0,"div"),d(1,Ue,2,0,"div",65),t()),e&2){let n=u();s(),a("ngIf",n.f.profession.errors.required)}}function ze(e,m){e&1&&(i(0,"div",66),o(1," El campo instituci\xF3n es obligatorio. "),t())}function Ge(e,m){if(e&1&&(i(0,"div"),d(1,ze,2,0,"div",65),t()),e&2){let n=u();s(),a("ngIf",n.f.institution.errors.required)}}function Je(e,m){e&1&&(i(0,"small",67),o(1," Instituci\xF3n en la que desarrolla sus labores profesionales. "),t())}function $e(e,m){e&1&&(i(0,"div"),o(1," Debes seleccionar una de las categorias. "),t())}function Qe(e,m){if(e&1&&(i(0,"div",64),d(1,$e,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.category.errors.required)}}function He(e,m){e&1&&(i(0,"span"),o(1," profesional en din\xE1mica de sistemas. "),t())}function Ke(e,m){e&1&&(i(0,"span"),o(1,"docente."),t())}function Ye(e,m){e&1&&(i(0,"div",66),o(1," Debes describir brevemente tu perfil "),t())}function We(e,m){e&1&&(i(0,"div",66),o(1," El texto tiene m\xE1s de 1000 caracteres. "),t())}function Xe(e,m){if(e&1&&(i(0,"div"),d(1,Ye,2,0,"div",65)(2,We,2,0,"div",65),t()),e&2){let n=u(2);s(),a("ngIf",n.f.experience.errors.required),s(),a("ngIf",n.f.experience.hasError("maxlength"))}}function Ze(e,m){if(e&1){let n=j();i(0,"div",42)(1,"label",68),o(2,"Perfil profesional*"),t(),i(3,"textarea",69),y("keyup",function(r){A(n);let p=u();return q(p.onKey(r))}),o(4,"                                    "),t(),i(5,"span",null,0),o(7),t(),i(8,"small",70),o(9," Por favor describa brevemente su perfil profesional y su experiencia como "),d(10,He,2,0,"span",71)(11,Ke,2,0,"ng-template",null,1,z),t(),d(13,Xe,3,2,"div",27),t()}if(e&2){let n=U(12),l=u();s(3),a("ngClass",f(5,g,l.submitted&&l.f.category.errors)),s(4),R(l.Contador),s(3),a("ngIf",l.f.category.value=="expert")("ngIfElse",n),s(3),a("ngIf",l.submitted&&l.f.experience.errors)}}function et(e,m){e&1&&(i(0,"div"),o(1," Debes aceptar los t\xE9rminos y condiciones para registrarte en RedDin\xE1mica. "),t())}function tt(e,m){if(e&1&&(i(0,"div",64),d(1,et,2,0,"div",27),t()),e&2){let n=u();s(),a("ngIf",n.f.tyc.errors.required)}}function it(e,m){e&1&&(i(0,"div",9)(1,"div",72)(2,"div",73)(3,"span",74),o(4,"Loading..."),t()()()())}var Ee=(()=>{class e{constructor(n,l,r,p,b,Se,Ie){this._formBuilder=n,this._userService=l,this._bDService=r,this._messageService=p,this._route=b,this._router=Se,this.renderer=Ie,this.submitted=!1,this.tyc_file="assets/TyC_RedDinamica.pdf",this.profession=new _e(""),this.institution=new he,this.unsubscribe$=new k,this.Contador=1e3,this.title="Registro",this.user=new ge,this.tyc_file=be,this.url=le.url,this.items={institution:[],profession:[]}}ngOnInit(){this.getAllInstitutions(),this.getAllProfessions(),this.registerForm=this._formBuilder.group({name:["",c.required],surname:["",c.required],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required],profession:["",c.required],institution:["",c.required],category:["",c.required],experience:["",[c.maxLength(1e3)]],tyc:[!1,c.requiredTrue]},{validators:ve("password","confirmPassword")})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}get f(){return this.registerForm.controls}onSubmit(){return N(this,null,function*(){if(this.submitted=!0,this.registerForm.invalid){this.loading=!1;return}this.user.name=this.registerForm.value.name,this.user.surname=this.registerForm.value.surname,this.user.email=this.registerForm.value.email,this.user.password=this.registerForm.value.password,this.user.role=this.registerForm.value.category,this.user.about=this.registerForm.value.experience,this.registerForm.value.profession&&(this.user.profession=this.registerForm.value.profession._id||this.registerForm.value.profession),this.registerForm.value.institution&&(this.user.institution=this.registerForm.value.institution._id||this.registerForm.value.institution),["student","guest"].includes(this.f.category.value)&&(this.user.about="");try{if(!this.user.profession&&this.registerForm.value.profession){this.registerForm.value.profession.name?this.profession.name=this.registerForm.value.profession.name:this.profession.name=this.registerForm.value.profession;let l=yield C(this._bDService.addProfession(this.profession));l.profession&&l.profession._id?(this.user.profession=l.profession._id,localStorage.removeItem("professions"),this.getAllProfessions()):console.log(l)}if(!this.user.institution&&this.registerForm.value.institution){this.registerForm.value.institution.name?this.institution.name=this.registerForm.value.institution.name:this.institution.name=this.registerForm.value.institution;let l=yield C(this._bDService.addInstitution(this.institution));l.institution&&l.institution._id?(this.user.institution=l.institution._id,localStorage.removeItem("institutions"),this.getAllInstitutions()):console.log(l)}let n=yield C(this._userService.register(this.user));n.user&&n.user._id?this._userService.signup(this.user).pipe(v(l=>{l.user&&l.user._id?(localStorage.setItem("identity",JSON.stringify(l.user)),this._userService.signup(this.user,!0).pipe(v(r=>{this.token=r.token,this.token.length<=0?this.status="error":(this.status="success",localStorage.setItem("token",this.token),this.getAllInstitutions(),this.getAllProfessions(),this.getAllAreas(),this.getCounters(),this.getUnviewMessages(),this._router.navigate(["/inicio"]))}),E(r=>(console.log("Error during signup with token:",r),this.status="error",x(()=>r)))).subscribe()):this.status="error"}),E(l=>(console.log("Error during signup:",l),this.status="error",x(()=>l)))).subscribe():(this.status="error",this.message="No ha sido posible realizar el registro, el correo electr\xF3nico ya se encuentra registrado.")}catch(n){this.status="error while running register",console.log("Error during registration:",n)}})}onInputChange(n){let l=n.target,r=l.value;typeof r!="string"&&(l.value="",console.warn("Input value is not a string:",r))}getAllProfessions(){this._bDService.getAllProfessions().pipe(v(n=>{n.professions&&(this.allProfessions=n.professions,this.items.profession=this.allProfessions,localStorage.setItem("professions",JSON.stringify(this.allProfessions)))}),F(this.unsubscribe$)).subscribe()}onKey(n){var l=n.target;this.Contador=1e3-l.value.length,this.Contador<0?this.renderer.setStyle(this.contador.nativeElement,"color","red"):this.renderer.setStyle(this.contador.nativeElement,"color","black")}getAllAreas(){this._bDService.getAllKnowledgeAreas().pipe(v(n=>{n.areas&&(this.allAreas=n.areas,localStorage.setItem("areas",JSON.stringify(this.allAreas)))}),E(n=>(console.log("Error fetching areas:",n),x(()=>n)))).subscribe()}getAllInstitutions(){this._bDService.getAllInstitutions().pipe(v(n=>{n.institutions&&(this.allInstitutions=n.institutions,this.items.institution=this.allInstitutions,localStorage.setItem("institutions",JSON.stringify(this.allInstitutions)))}),F(this.unsubscribe$)).subscribe()}getCounters(){this._userService.getCounters().pipe(v(n=>{n&&localStorage.setItem("stats",JSON.stringify(n))}),E(n=>(console.log("Error fetching counters:",n),x(()=>n)))).subscribe()}getUnviewMessages(){this._messageService.getUnviewMessages(this.token).pipe(v(n=>{n.unviewed&&localStorage.setItem("unviewedMessages",n.unviewed)}),E(n=>(console.log("Error fetching unviewed messages:",n),x(()=>n)))).subscribe()}static{this.\u0275fac=function(l){return new(l||e)(_(re),_(me),_(fe),_(pe),_(de),_(ue),_(P))}}static{this.\u0275cmp=M({type:e,selectors:[["register"]],viewQuery:function(l,r){if(l&1&&L(Fe,5),l&2){let p;V(p=O())&&(r.contador=p.first)}},standalone:!1,decls:113,vars:49,consts:[["contador",""],["teacher",""],["id","register",1,"bg-white"],[1,"container","px-0","py-3","py-sm-4","bg-light"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card"],[1,"card-header","bg-primary","text-white","text-center","py-3"],[1,"mb-0"],[1,"card-body"],["class","mx-4 alert alert-danger alert-dismissible fade show text-center","role","alert",4,"ngIf"],[1,"px-4","py-3",3,"ngSubmit","formGroup"],[1,"mb-3","col-md-6"],["for","name"],["type","text","id","name","placeholder","Nombres","formControlName","name",1,"form-control",3,"input","ngClass"],["class","invalid-feedback",4,"ngIf"],["for","surname"],["type","text","id","surname","placeholder","Apellidos","formControlName","surname",1,"form-control",3,"input","ngClass"],[1,"mb-3","col-12"],["for","email"],["type","email","id","email","placeholder","Correo eletr\xF3nico","formControlName","email",1,"form-control",3,"input","ngClass"],["for","password"],["type","password","id","password","placeholder","Ingrese su contrase\xF1a","formControlName","password",1,"form-control",3,"ngClass"],["for","confirmPassword"],["type","password","id","confirmPassword","placeholder","Repita su contrase\xF1a","formControlName","confirmPassword",1,"form-control",3,"ngClass"],["for","profession"],["bindLabel","name","addTagText","Agregar profesi\xF3n","formControlName","profession","placeholder","Profesi\xF3n",3,"items","addTag","ngClass"],[4,"ngIf"],["for","institution"],["bindLabel","name","addTagText","Agregar instituci\xF3n","formControlName","institution","placeholder","Instituci\xF3n",3,"items","addTag","ngClass"],["id","institutionHelp","class","form-text text-muted",4,"ngIf"],["id","help","tabindex","-1","role","dialog","aria-labelledby","helpTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalCenterTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table"],["scope","row"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"mb-3"],["for","category"],["data-bs-toggle","modal","data-bs-target","#help","title","Ayuda",2,"cursor","pointer"],[1,"fas","fa-question-circle"],["size","4","formControlName","category","id","category",1,"form-control",3,"ngClass"],["value","expert"],["value","teacher"],["value","student"],["value","guest"],["class","mb-3",4,"ngIf"],[1,"mb-3","form-check"],["type","checkbox","id","tyc","formControlName","tyc","required","",1,"form-check-input",3,"ngClass"],["for","tyc",1,"form-check-label","text-justify"],[1,"text-muted"],["target","_blank",3,"href"],["class","card-body",4,"ngIf"],["type","submit",1,"btn","btn-success","w-100","btn-lg",3,"click"],[1,"card-footer","text-center"],[1,"card-text"],[1,"dropdown-item","py-2",3,"routerLink"],["role","alert",1,"mx-4","alert","alert-danger","alert-dismissible","fade","show","text-center"],[1,"alert-link",3,"routerLink"],[1,"invalid-feedback"],["class","invalid-feedback-select",4,"ngIf"],[1,"invalid-feedback-select"],["id","institutionHelp",1,"form-text","text-muted"],["for","experience"],["id","experience","max-length","1000","rows","3","placeholder","Describe brevemente tu perfil profesional (M\xE1ximo 1000 caracteres)","formControlName","experience",1,"form-control",3,"keyup","ngClass"],["id","experienceHelp",1,"form-text"],[4,"ngIf","ngIfElse"],[1,"text-muted","text-center"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,"visually-hidden"]],template:function(l,r){l&1&&(i(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h2",8),o(7),t()(),i(8,"div",9),d(9,Re,4,3,"div",10),i(10,"form",11),y("ngSubmit",function(){return r.onSubmit()}),i(11,"div",4)(12,"div",12)(13,"label",13),o(14,"Nombres*"),t(),i(15,"input",14),y("input",function(b){return r.onInputChange(b)}),t(),d(16,Te,2,1,"div",15),t(),i(17,"div",12)(18,"label",16),o(19,"Apellidos*"),t(),i(20,"input",17),y("input",function(b){return r.onInputChange(b)}),t(),d(21,ke,2,1,"div",15),t(),i(22,"div",18)(23,"label",19),o(24,"Correo electr\xF3nico*"),t(),i(25,"input",20),y("input",function(b){return r.onInputChange(b)}),t(),d(26,De,3,2,"div",15),t(),i(27,"div",12)(28,"label",21),o(29,"Contrase\xF1a*"),t(),h(30,"input",22),d(31,je,3,2,"div",15),t(),i(32,"div",12)(33,"label",23),o(34,"Confirmar contrase\xF1a*"),t(),h(35,"input",24),d(36,Oe,3,2,"div",15),t(),i(37,"div",18)(38,"label",25),o(39,"Profesi\xF3n*"),t(),h(40,"ng-select",26),d(41,Be,2,1,"div",27),t(),i(42,"div",18)(43,"label",28),o(44,"Instituci\xF3n*"),t(),h(45,"ng-select",29),d(46,Ge,2,1,"div",27)(47,Je,2,0,"small",30),t()(),i(48,"div",31)(49,"div",32)(50,"div",33)(51,"div",34)(52,"h5",35),o(53," Tipos de usuarios RedDin\xE1mica "),t(),h(54,"button",36),t(),i(55,"div",37)(56,"table",38)(57,"tbody")(58,"tr")(59,"th",39),o(60,"Facilitador"),t(),i(61,"td"),o(62," Eres especialista en la din\xE1mica de sistemas, te apasiona el tema y los aportes que puede ofrecer en el campo educativo, adem\xE1s, te gustar\xEDa trabajar en conjunto con docentes en la construcci\xF3n y mejora de materiales acad\xE9micos, aportando con la tu asesor\xEDa y gu\xEDa en el proceso de desarrollo de los mismo, entonces registrate como facilitador. "),t()(),i(63,"tr")(64,"th",39),o(65,"Docente"),t(),i(66,"td"),o(67," El perfil docente es para aquellos usuarios que se encuentran actualmente ejerciendo esta profesi\xF3n en una instituci\xF3n educativa y est\xE1n interesados en incluir la din\xE1mica de sistemas en sus clases, como tambi\xE9n, en participar en la construcci\xF3n de lecciones y materiales para clases de las distintas \xE1reas de conocimiento en las que se desempe\xF1an. "),t()(),i(68,"tr")(69,"th",39),o(70,"Estudiante"),t(),i(71,"td"),o(72," Si actualmente estas cursando estudios de pregrado y te encuentras en el proceso de aprendizaje de los conceptos de la din\xE1mica de sistemas, puedes acceder al sitio, participar, ver las lecciones de clase creadas y descargar los recursos del sitio con el perfil de estudiante. "),t()(),i(73,"tr")(74,"th",39),o(75,"Invitado"),t(),i(76,"td"),o(77,"No encajas en ninguno de los perfiles anteriores, pero estas interesado en conocer y aprender sobre din\xE1mica de sistemas, registrate como invitado. Con este perfil puedes acceder al sitio, ver las lecciones de clase creadas y descargar los recursos del sitio. "),t()()()()(),i(78,"div",40)(79,"button",41),o(80," Cerrar "),t()()()()(),i(81,"div",42)(82,"label",43),o(83," Perfil de usuario* "),i(84,"a",44),h(85,"i",45),t()(),i(86,"select",46)(87,"option",47),o(88,"Facilitador"),t(),i(89,"option",48),o(90,"Docente"),t(),i(91,"option",49),o(92,"Estudiante"),t(),i(93,"option",50),o(94,"Invitado"),t()(),d(95,Qe,2,1,"div",15),t(),d(96,Ze,14,7,"div",51),i(97,"div",52),h(98,"input",53),i(99,"label",54)(100,"small",55),o(101,"Aceptar t\xE9rminos y condiciones de RedDin\xE1mica. Para conocer los t\xE9rminos y condiciones haz click en: "),i(102,"a",56),o(103,"T\xE9rminos y Condiciones"),t()()(),d(104,tt,2,1,"div",15),t(),d(105,it,5,0,"div",57),i(106,"button",58),y("click",function(){return r.loading=!0}),o(107," Crear mi cuenta "),t()()(),i(108,"div",59)(109,"p",60),o(110,"\xBFYa tienes una cuenta?"),t(),i(111,"a",61),o(112,"Inicia sesi\xF3n"),t()()()()()()()),l&2&&(s(7),R(r.title),s(2),a("ngIf",r.message),s(),a("formGroup",r.registerForm),s(5),a("ngClass",f(30,g,r.submitted&&r.f.name.errors)),s(),a("ngIf",r.submitted&&r.f.name.errors),s(4),a("ngClass",f(32,g,r.submitted&&r.f.surname.errors)),s(),a("ngIf",r.submitted&&r.f.surname.errors),s(4),a("ngClass",f(34,g,r.submitted&&r.f.email.errors)),s(),a("ngIf",r.submitted&&r.f.email.errors),s(4),a("ngClass",f(36,g,r.submitted&&r.f.password.errors)),s(),a("ngIf",r.submitted&&r.f.password.errors),s(4),a("ngClass",f(38,g,r.submitted&&r.f.confirmPassword.errors)),s(),a("ngIf",r.submitted&&r.f.confirmPassword.errors),s(4),a("items",r.items.profession)("addTag",!0)("ngClass",f(40,g,r.submitted&&r.f.profession.errors)),s(),a("ngIf",r.submitted&&r.f.profession.errors),s(4),a("items",r.items.institution)("addTag",!0)("ngClass",f(42,g,r.submitted&&r.f.institution.errors)),s(),a("ngIf",r.submitted&&r.f.institution.errors),s(),a("ngIf",!r.submitted),s(39),a("ngClass",f(44,g,r.submitted&&r.f.category.errors)),s(9),a("ngIf",r.submitted&&r.f.category.errors),s(),a("ngIf",r.f.category.value=="expert"||r.f.category.value==="teacher"),s(2),a("ngClass",f(46,g,r.submitted&&r.f.tyc.errors)),s(4),a("href",r.tyc_file,D),s(2),a("ngIf",r.submitted&&r.f.tyc.errors),s(),a("ngIf",r.loading),s(6),a("routerLink",w(48,xe)))},dependencies:[G,J,W,te,ie,H,Q,ee,K,Y,ne,X,Z,ce,se],encapsulation:2})}}return e})();var nt=[{path:"",component:Ee}],Ce=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=I({type:e})}static{this.\u0275inj=S({imports:[T.forChild(nt),T]})}}return e})();var kt=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=I({type:e})}static{this.\u0275inj=S({imports:[$,oe,Ce,ae]})}}return e})();export{kt as RegisterModule};
