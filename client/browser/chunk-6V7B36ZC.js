import{a as u}from"./chunk-H2O7B6BZ.js";import{a as p}from"./chunk-M6MDGVAZ.js";import{O as a,Sb as o,Vb as h,W as c,Z as s,a as n}from"./chunk-3BHHYQXT.js";var y=(()=>{class i{constructor(t,e){this.http=t,this.userService=e,this.url=p.url}getHeaders(){let t=this.userService.getToken();return t?new o({"Content-Type":"application/json",Authorization:t}):(console.error("Token no disponible para notificaciones"),new o({"Content-Type":"application/json"}))}getNotifications(t=1,e=10,r=!1){let d=this.getHeaders(),l=new URLSearchParams(n({page:t.toString(),limit:e.toString()},r&&{unread:"true"}));return this.http.get(`${this.url}notifications?${l}`,{headers:d})}getUnreadCount(){let t=this.getHeaders();return this.http.get(`${this.url}notifications/unread-count`,{headers:t})}markAsRead(t){let e=this.getHeaders();return this.http.put(`${this.url}notifications/${t}/read`,{},{headers:e})}markAllAsRead(){let t=this.getHeaders();return this.http.put(`${this.url}notifications/mark-all-read`,{},{headers:t})}deleteNotification(t){let e=this.getHeaders();return this.http.delete(`${this.url}notifications/${t}`,{headers:e}).pipe(a({count:2,delay:500}))}createNotification(t){let e=this.getHeaders(),r=JSON.stringify(t);return this.http.post(`${this.url}notifications`,r,{headers:e})}static{this.\u0275fac=function(e){return new(e||i)(s(h),s(u))}}static{this.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{y as a};
