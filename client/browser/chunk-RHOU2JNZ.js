import{a as E}from"./chunk-43WXPJ7N.js";import"./chunk-L5TQBNKQ.js";import{B as v,C}from"./chunk-GWDAXWU7.js";import{Da as c,Hb as h,Na as n,Oa as r,Rb as b,Ua as f,X as s,eb as o,ec as d,gb as p,pa as l,sa as u,ta as g,ua as m}from"./chunk-3BHHYQXT.js";var y=(()=>{class e{constructor(t){this.userService=t,this.emailDigestEnabled=!0,this.saving=!1,this.error=null}ngOnInit(){this.userService.getMyPreferences().subscribe({next:t=>{this.emailDigestEnabled=t&&typeof t.emailDigestEnabled=="boolean"?t.emailDigestEnabled:!0,localStorage.setItem("rd_email_digest_enabled",String(this.emailDigestEnabled))},error:()=>{let t=localStorage.getItem("rd_email_digest_enabled");this.emailDigestEnabled=t!==null?t==="true":!0}})}onToggleEmailDigest(){this.emailDigestEnabled=!this.emailDigestEnabled,localStorage.setItem("rd_email_digest_enabled",String(this.emailDigestEnabled)),this.saving=!0,this.error=null,this.userService.updateMyPreferences({emailDigestEnabled:this.emailDigestEnabled}).subscribe({next:()=>{this.saving=!1},error:t=>{this.saving=!1,this.error="No se pudo guardar en el servidor."}})}static{this.\u0275fac=function(i){return new(i||e)(u(E))}}static{this.\u0275cmp=g({type:e,selectors:[["app-configuration"]],standalone:!1,decls:16,vars:3,consts:[[1,"container","my-3","configuration-container"],[1,"card"],[1,"card-header"],[1,"m-0","text-primary","fw-bold"],[1,"card-body"],[1,"card-title"],[1,"text-muted"],[1,"form-check","form-switch"],["type","checkbox","id","emailDigestSwitch",1,"form-check-input",3,"change","checked"],["for","emailDigestSwitch",1,"form-check-label"],[1,"alert","mt-3",3,"ngClass"]],template:function(i,a){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o(4,"Configuraci\xF3n"),r()(),n(5,"div",4)(6,"h4",5),o(7,"Preferencias de correo"),r(),n(8,"p",6),o(9,"Activa o desactiva el resumen mensual por correo."),r(),n(10,"div",7)(11,"input",8),f("change",function(){return a.onToggleEmailDigest()}),r(),n(12,"label",9),o(13," Recibir resumen mensual al correo "),r()(),n(14,"div",10),o(15),r()()()()),i&2&&(l(11),c("checked",a.emailDigestEnabled),l(3),c("ngClass",a.emailDigestEnabled?"alert-success":"alert-secondary"),l(),p(" ",a.emailDigestEnabled?"Recibir\xE1s el resumen mensual por correo.":"Has desactivado el resumen mensual por correo."," "))},dependencies:[h],styles:[".configuration-container[_ngcontent-%COMP%]{margin-top:1rem}.configuration-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:.5rem}"]})}}return e})();var S=[{path:"",component:y}],M=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=m({type:e})}static{this.\u0275inj=s({imports:[d.forChild(S),d]})}}return e})();var A=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=m({type:e})}static{this.\u0275inj=s({imports:[b,v,C,M]})}}return e})();export{A as ConfigurationModule};
